<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSC Exam Practice - Kerala Public Service Commission</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Malayalam:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans Malayalam', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .screen {
            display: none;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .screen.active {
            display: block;
        }

        /* Login Screen */
        .login-screen {
            text-align: center;
            padding: 60px 40px;
            max-width: 500px;
            margin: 100px auto;
        }

        .login-screen h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .login-screen p {
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .input-group {
            margin-bottom: 30px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: #555;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-success {
            background: #28a745;
        }

        /* Exam Screen */
        .exam-screen {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #e1e5e9;
            padding: 20px;
            overflow-y: auto;
        }

        .sidebar h3 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 1.2rem;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .question-number {
            width: 40px;
            height: 40px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .question-number.current {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .question-number.answered {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .question-number:hover {
            border-color: #667eea;
        }

        .timer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .timer h4 {
            color: #856404;
            margin-bottom: 5px;
        }

        .timer-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: #856404;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .exam-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e1e5e9;
        }

        .exam-header h2 {
            color: #667eea;
            font-size: 1.8rem;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number-display {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .category-tag {
            background: #e9ecef;
            color: #495057;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .option-text {
            font-size: 1.1rem;
            line-height: 1.4;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .progress-info {
            color: #666;
            font-size: 0.9rem;
        }

        /* Result Screen */
        .result-screen {
            padding: 40px;
            text-align: center;
        }

        .result-header {
            margin-bottom: 40px;
        }

        .result-header h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .stat-card.correct {
            border-left-color: #28a745;
        }

        .stat-card.wrong {
            border-left-color: #dc3545;
        }

        .stat-card.unanswered {
            border-left-color: #ffc107;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .chart-container {
            max-width: 400px;
            margin: 0 auto 30px;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .exam-screen {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: 200px;
            }
            
            .question-grid {
                grid-template-columns: repeat(10, 1fr);
            }
            
            .question-number {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="loginScreen" class="screen active">
            <div class="login-screen">
                <h1>PSC പരീക്ഷാ പരിശീലനം</h1>
                <p>Kerala Public Service Commission Exam Practice</p>
                <div class="input-group">
                    <label for="accessCode">ആക്സസ് കോഡ് നൽകുക (Access Code)</label>
                    <input type="text" id="accessCode" placeholder="psc100" />
                </div>
                <button class="btn" onclick="handleLogin()">പരീക്ഷ ആരംഭിക്കുക</button>
                <div id="loginError" class="error-message" style="display: none;">
                    തെറ്റായ ആക്സസ് കോഡ്! ദയവായി വീണ്ടും ശ്രമിക്കുക.
                </div>
            </div>
        </div>

        <!-- Exam Screen -->
        <div id="examScreen" class="screen">
            <div class="exam-screen">
                <div class="sidebar">
                    <div class="timer">
                        <h4>ബാക്കി സമയം</h4>
                        <div id="timerDisplay" class="timer-display">01:30:00</div>
                    </div>
                    
                    <h3>ചോദ്യങ്ങൾ</h3>
                    <div id="questionGrid" class="question-grid"></div>
                    
                    <button class="btn btn-danger" onclick="finishExam()" style="width: 100%; margin-top: 20px;">
                        പരീക്ഷ പൂർത്തിയാക്കുക
                    </button>
                </div>
                
                <div class="main-content">
                    <div class="exam-header">
                        <h2>PSC പരീക്ഷാ പരിശീലനം</h2>
                    </div>
                    
                    <div class="question-container">
                        <div class="question-header">
                            <span id="questionNumberDisplay" class="question-number-display">ചോദ്യം 1</span>
                            <span id="categoryDisplay" class="category-tag">പൊതുവിജ്ഞാനം</span>
                        </div>
                        
                        <div id="questionText" class="question-text"></div>
                        
                        <div id="optionsContainer" class="options"></div>
                    </div>
                    
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">മുമ്പത്തെ ചോദ്യം</button>
                        <div class="progress-info">
                            <span id="progressText">1 / 100</span>
                        </div>
                        <button class="btn" onclick="nextQuestion()" id="nextBtn">അടുത്ത ചോദ്യം</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="screen">
            <div class="result-screen">
                <div class="result-header">
                    <h1>പരീക്ഷാ ഫലം</h1>
                    <p>നിങ്ങളുടെ പ്രകടനം</p>
                </div>
                
                <div class="result-stats">
                    <div class="stat-card correct">
                        <div id="correctCount" class="stat-number">0</div>
                        <div class="stat-label">ശരിയായ ഉത്തരങ്ങൾ</div>
                    </div>
                    <div class="stat-card wrong">
                        <div id="wrongCount" class="stat-number">0</div>
                        <div class="stat-label">തെറ്റായ ഉത്തരങ്ങൾ</div>
                    </div>
                    <div class="stat-card unanswered">
                        <div id="unansweredCount" class="stat-number">0</div>
                        <div class="stat-label">ഉത്തരം നൽകാത്തവ</div>
                    </div>
                    <div class="stat-card">
                        <div id="finalScore" class="stat-number">0</div>
                        <div class="stat-label">മൊത്തം സ്കോർ</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="resultChart"></canvas>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn btn-success" onclick="downloadChart()">ചാർട്ട് ഡൗൺലോഡ് ചെയ്യുക</button>
                    <button class="btn btn-secondary" onclick="restartExam()" style="margin-left: 15px;">വീണ്ടും പരീക്ഷ എഴുതുക</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions data
        const questions = [
            {
                id: 1,
                question: "ഇന്ത്യയുടെ ആദ്യ പ്രധാനമന്ത്രി ആരായിരുന്നു?",
                options: ["മഹാത്മാ ഗാന്ധി", "ജവഹർലാൽ നെഹ്‌റു", "സർദാർ പട്ടേൽ", "രാജേന്ദ്ര പ്രസാദ്"],
                correct: 1,
                category: "ചരിത്രം"
            },
            {
                id: 2,
                question: "ഇന്ത്യൻ ഭരണഘടനയിൽ എത്ര അനുച്ഛേദങ്ങളുണ്ട്?",
                options: ["395", "396", "397", "398"],
                correct: 0,
                category: "ഭരണഘടന"
            },
            {
                id: 3,
                question: "കേരളത്തിന്റെ ആദ്യ മുഖ്യമന്ത്രി ആരായിരുന്നു?",
                options: ["ഇ.എം.എസ് നമ്പൂതിരിപ്പാട്", "പട്ടം താണുപിള്ള", "ആർ. ശങ്കർ", "സി. അച്യുത മേനോൻ"],
                correct: 0,
                category: "കേരള ചരിത്രം"
            },
            {
                id: 4,
                question: "ഇന്ത്യയിലെ ഏറ്റവും ഉയരമുള്ള പർവ്വതം ഏതാണ്?",
                options: ["കാഞ്ചൻജംഗ", "നന്ദാദേവി", "കാമേറ്റ്", "ധവളഗിരി"],
                correct: 0,
                category: "ഭൂമിശാസ്ത്രം"
            },
            {
                id: 5,
                question: "ഇന്ത്യയുടെ ദേശീയ പക്ഷി ഏതാണ്?",
                options: ["കൊക്ക്", "മയിൽ", "പരുന്ത്", "കാക്ക"],
                correct: 1,
                category: "പൊതുവിജ്ഞാനം"
            },
            {
                id: 6,
                question: "ഇന്ത്യയുടെ ദേശീയ ഗാനം എഴുതിയത് ആരാണ്?",
                options: ["രവീന്ദ്രനാഥ് ടാഗോർ", "ബങ്കിം ചന്ദ്ര ചാറ്റർജി", "സുബ്രഹ്മണ്യ ഭാരതി", "മഹാത്മാ ഗാന്ധി"],
                correct: 0,
                category: "സാഹിത്യം"
            },
            {
                id: 7,
                question: "ഇന്ത്യയിലെ ഏറ്റവും നീളമുള്ള നദി ഏതാണ്?",
                options: ["ഗംഗ", "ഗോദാവരി", "നർമ്മദ", "കൃഷ്ണ"],
                correct: 0,
                category: "ഭൂമിശാസ്ത്രം"
            },
            {
                id: 8,
                question: "ഇന്ത്യയുടെ ആദ്യ രാഷ്ട്രപതി ആരായിരുന്നു?",
                options: ["രാജേന്ദ്ര പ്രസാദ്", "എ.പി.ജെ. അബ്ദുൽ കലാം", "സർവപള്ളി രാധാകൃഷ്ണൻ", "വി.വി. ഗിരി"],
                correct: 0,
                category: "ചരിത്രം"
            },
            {
                id: 9,
                question: "കേരളത്തിലെ ഏറ്റവും ഉയരമുള്ള കൊടുമുടി ഏതാണ്?",
                options: ["അനൈമുടി", "മീശാപ്പുലിമല", "ആഗസ്ത്യകൂടം", "ചെമ്പ്ര പീക്"],
                correct: 0,
                category: "കേരള ഭൂമിശാസ്ത്രം"
            },
            {
                id: 10,
                question: "ഇന്ത്യയുടെ സിലിക്കൺ വാലി എന്നറിയപ്പെടുന്ന നഗരം ഏതാണ്?",
                options: ["ബാംഗ്ലൂർ", "ഹൈദരാബാദ്", "പൂനെ", "ചെന്നൈ"],
                correct: 0,
                category: "സാങ്കേതികവിദ്യ"
            }
        ];

        // Add more sample questions to reach 100
        for (let i = 11; i <= 100; i++) {
            const categories = ["പൊതുവിജ്ഞാനം", "ശാസ്ത്രം", "ഗണിതം", "ഇംഗ്ലീഷ്", "നിലവിലെ കാര്യങ്ങൾ"];
            questions.push({
                id: i,
                question: `സാമ്പിൾ ചോദ്യം ${i}: ഇത് ഒരു പരീക്ഷാ ചോദ്യമാണ്?`,
                options: ["ഓപ്ഷൻ A", "ഓപ്ഷൻ B", "ഓപ്ഷൻ C", "ഓപ്ഷൻ D"],
                correct: Math.floor(Math.random() * 4),
                category: categories[Math.floor(Math.random() * categories.length)]
            });
        }

        // Global variables
        let currentQuestion = 0;
        let userAnswers = {};
        let timeLeft = 90 * 60; // 90 minutes in seconds
        let timerInterval;
        let examStarted = false;

        // Initialize question grid
        function initializeQuestionGrid() {
            const grid = document.getElementById('questionGrid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 100; i++) {
                const questionNumber = document.createElement('div');
                questionNumber.className = 'question-number';
                questionNumber.textContent = i;
                questionNumber.onclick = () => goToQuestion(i - 1);
                grid.appendChild(questionNumber);
            }
            updateQuestionGrid();
        }

        // Update question grid colors
        function updateQuestionGrid() {
            const questionNumbers = document.querySelectorAll('.question-number');
            questionNumbers.forEach((element, index) => {
                element.classList.remove('current', 'answered');
                
                if (index === currentQuestion) {
                    element.classList.add('current');
                } else if (userAnswers[index + 1] !== undefined) {
                    element.classList.add('answered');
                }
            });
        }

        // Display current question
        function displayQuestion() {
            const question = questions[currentQuestion];
            
            document.getElementById('questionNumberDisplay').textContent = `ചോദ്യം ${currentQuestion + 1}`;
            document.getElementById('categoryDisplay').textContent = question.category;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('progressText').textContent = `${currentQuestion + 1} / 100`;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                
                const isSelected = userAnswers[question.id] === index;
                if (isSelected) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.innerHTML = `
                    <input type="radio" name="question${question.id}" value="${index}" ${isSelected ? 'checked' : ''}>
                    <span class="option-text">${option}</span>
                `;
                
                optionDiv.onclick = () => selectAnswer(question.id, index);
                optionsContainer.appendChild(optionDiv);
            });
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === 99 ? 'പരീക്ഷ പൂർത്തിയാക്കുക' : 'അടുത്ത ചോദ്യം';
            
            updateQuestionGrid();
        }

        // Select answer
        function selectAnswer(questionId, optionIndex) {
            userAnswers[questionId] = optionIndex;
            
            // Update radio buttons
            const radioButtons = document.querySelectorAll(`input[name="question${questionId}"]`);
            radioButtons.forEach((radio, index) => {
                radio.checked = index === optionIndex;
            });
            
            // Update option styling
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.toggle('selected', index === optionIndex);
            });
            
            updateQuestionGrid();
        }

        // Navigation functions
        function nextQuestion() {
            if (currentQuestion < 99) {
                currentQuestion++;
                displayQuestion();
            } else {
                finishExam();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        function goToQuestion(questionIndex) {
            currentQuestion = questionIndex;
            displayQuestion();
        }

        // Timer functions
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    finishExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            
            const display = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
            
            // Change color when time is running out
            const timerDisplay = document.getElementById('timerDisplay');
            if (timeLeft < 300) { // Less than 5 minutes
                timerDisplay.style.color = '#dc3545';
            } else if (timeLeft < 900) { // Less than 15 minutes
                timerDisplay.style.color = '#fd7e14';
            }
        }

        // Login function
        function handleLogin() {
            const accessCode = document.getElementById('accessCode').value;
            const errorDiv = document.getElementById('loginError');
            
            if (accessCode === 'psc100') {
                document.getElementById('loginScreen').classList.remove('active');
                document.getElementById('examScreen').classList.add('active');
                
                initializeQuestionGrid();
                displayQuestion();
                startTimer();
                examStarted = true;
            } else {
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 3000);
            }
        }

        // Finish exam
        function finishExam() {
            if (examStarted) {
                clearInterval(timerInterval);
                examStarted = false;
                
                document.getElementById('examScreen').classList.remove('active');
                document.getElementById('resultScreen').classList.add('active');
                
                calculateAndDisplayResults();
            }
        }

        // Calculate results
        function calculateAndDisplayResults() {
            let correct = 0;
            let wrong = 0;
            let unanswered = 0;
            
            questions.forEach(question => {
                const userAnswer = userAnswers[question.id];
                if (userAnswer === undefined) {
                    unanswered++;
                } else if (userAnswer === question.correct) {
                    correct++;
                } else {
                    wrong++;
                }
            });
            
            const finalScore = correct - (wrong * 1/3);
            
            // Update display
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('wrongCount').textContent = wrong;
            document.getElementById('unansweredCount').textContent = unanswered;
            document.getElementById('finalScore').textContent = finalScore.toFixed(2);
            
            // Create chart
            createResultChart(correct, wrong, unanswered);
        }

        // Create result chart
        function createResultChart(correct, wrong, unanswered) {
            const ctx = document.getElementById('resultChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ശരിയായ ഉത്തരങ്ങൾ', 'തെറ്റായ ഉത്തരങ്ങൾ', 'ഉത്തരം നൽകാത്തവ'],
                    datasets: [{
                        data: [correct, wrong, unanswered],
                        backgroundColor: ['#28a745', '#dc3545', '#ffc107'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
        }

        // Download chart
        function downloadChart() {
            const chartContainer = document.querySelector('.chart-container');
            html2canvas(chartContainer).then(canvas => {
                const link = document.createElement('a');
                link.download = 'psc-exam-result.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // Restart exam
        function restartExam() {
            currentQuestion = 0;
            userAnswers = {};
            timeLeft = 90 * 60;
            examStarted = false;
            
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('loginScreen').classList.add('active');
            
            document.getElementById('accessCode').value = '';
        }

        // Handle Enter key on login
        document.getElementById('accessCode').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleLogin();
            }
        });

        // Prevent page refresh
        window.addEventListener('beforeunload', function(e) {
            if (examStarted) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>
